<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SIGINT // Intelligence Dashboard</title>
    <!-- Leaflet CSS -->
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" 
          integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" 
          crossorigin=""/>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="map.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;500;700&family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="header-left">
                <h1 class="logo">
                    <span class="logo-bracket">[</span>
                    <span class="logo-text">SIGINT</span>
                    <span class="logo-bracket">]</span>
                </h1>
                <span class="tagline">// signals intelligence</span>
            </div>
            <div class="header-right">
                <div class="status-indicator">
                    <span class="status-dot" id="statusDot"></span>
                    <span class="status-text" id="statusText">CONNECTING</span>
                </div>
                <div class="last-update">
                    <span class="label">LAST UPDATE:</span>
                    <span id="lastUpdate">--:--:--</span>
                </div>
            </div>
        </header>

        <!-- Breaking News Banner -->
        <section class="breaking-section" id="breakingSection" style="display: none;">
            <div class="breaking-header">
                <span class="breaking-icon">‚ö°</span>
                <span class="breaking-label">BREAKING</span>
            </div>
            <div class="breaking-items" id="breakingItems"></div>
        </section>

        <!-- Time Range Slider -->
        <section class="time-range-section">
            <div class="time-range-header">
                <span class="time-range-icon">‚è±Ô∏è</span>
                <span class="time-range-label">TIME RANGE</span>
                <span class="time-range-value" id="timeRangeValue">24 hours</span>
            </div>
            <div class="time-range-slider-container">
                <input type="range" 
                       id="timeRangeSlider" 
                       class="time-range-slider" 
                       min="24" 
                       max="720" 
                       value="24" 
                       step="24">
                <div class="time-range-marks">
                    <span data-value="24">24h</span>
                    <span data-value="168">7d</span>
                    <span data-value="336">14d</span>
                    <span data-value="720">30d</span>
                </div>
            </div>
        </section>

        <!-- World Map Section -->
        <section class="map-section">
            <div class="map-header">
                <div class="map-title">
                    <span class="map-title-icon">üåç</span>
                    <span>GLOBAL INTELLIGENCE MAP</span>
                </div>
                <div class="map-controls">
                    <span id="map-counter" class="map-counter">0 LOCATIONS</span>
                    <button id="map-toggle" class="map-toggle">‚ñ≤ COLLAPSE MAP</button>
                </div>
            </div>
            <div id="map-container">
                <div id="sigint-map"></div>
            </div>
        </section>

        <!-- Market Ticker -->
        <div class="ticker-wrapper" id="tickerWrapper">
            <div class="ticker-track" id="tickerTrack">
                <!-- Ticker items injected here -->
            </div>
        </div>

        <!-- Main Grid -->
        <main class="dashboard-grid">
            <!-- Geopolitical -->
            <section class="panel" data-category="geopolitical">
                <div class="panel-header">
                    <h2 class="panel-title">
                        <span class="panel-icon">üåç</span>
                        GEOPOLITICAL
                    </h2>
                    <span class="panel-update" data-update></span>
                </div>
                <div class="panel-content" data-items></div>
            </section>

            <!-- AI/ML -->
            <section class="panel" data-category="ai-ml">
                <div class="panel-header">
                    <h2 class="panel-title">
                        <span class="panel-icon">ü§ñ</span>
                        AI / ML
                    </h2>
                    <span class="panel-update" data-update></span>
                </div>
                <div class="panel-content" data-items></div>
            </section>

            <!-- Deep Tech -->
            <section class="panel" data-category="deep-tech">
                <div class="panel-header">
                    <h2 class="panel-title">
                        <span class="panel-icon">‚öôÔ∏è</span>
                        DEEP TECH
                    </h2>
                    <span class="panel-update" data-update></span>
                </div>
                <div class="panel-content" data-items></div>
            </section>

            <!-- Crypto/Finance -->
            <section class="panel" data-category="crypto-finance">
                <div class="panel-header">
                    <h2 class="panel-title">
                        <span class="panel-icon">üìä</span>
                        CRYPTO / FINANCE
                    </h2>
                    <span class="panel-update" data-update></span>
                </div>
                <div class="panel-content" data-items></div>
            </section>

            <!-- Narrative Tracker (wider) -->
            <section class="panel panel-wide" data-category="narrative">
                <div class="panel-header">
                    <h2 class="panel-title">
                        <span class="panel-icon">üîó</span>
                        NARRATIVE TRACKER
                    </h2>
                    <span class="panel-update" data-update></span>
                </div>
                <div class="panel-content narrative-content" data-items></div>
            </section>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <div class="footer-left">
                <span class="footer-text">Auto-refresh: <span id="refreshCountdown">60</span>s</span>
            </div>
            <div class="footer-right">
                <button class="btn-archive" id="archiveBtn">24H ARCHIVE</button>
                <button class="btn-refresh" id="refreshBtn">‚Üª REFRESH</button>
            </div>
        </footer>

        <!-- Archive Modal -->
        <div class="modal" id="archiveModal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h3>ARCHIVE BROWSER</h3>
                    <button class="modal-close" id="archiveClose">√ó</button>
                </div>
                <div class="modal-body">
                    <div class="archive-controls">
                        <div class="archive-date-picker">
                            <label for="archiveDateSelect">Date:</label>
                            <select id="archiveDateSelect"></select>
                        </div>
                        <div class="archive-export">
                            <button class="export-btn" id="exportJsonBtn" title="Export as JSON">üìÑ JSON</button>
                            <button class="export-btn" id="exportCsvBtn" title="Export as CSV">üìä CSV</button>
                        </div>
                    </div>
                    <div class="archive-tabs" id="archiveTabs"></div>
                    <div class="archive-content" id="archiveContent"></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Leaflet JS -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"
            integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo="
            crossorigin=""></script>
    <script src="map.js"></script>
    <script src="app.js"></script>
</body>
</html>
